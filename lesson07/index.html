<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .title {
            font-size: 20px;
            color: blue;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script type="text/babel">

        function UserGreeting(props) {
            return <h1>Welcome back!</h1>;
        }

        function GuestGreeting(props) {
            return <h1>Please sign up.</h1>;
        }
        function Greeting(props){
            const isLoggedIn = props.isLoggedIn
            if(isLoggedIn){
                return <UserGreeting />
            }
            return <GuestGreeting />
        }
        function LoginButton(props){
            return (
                <button onClick={props.onClick}> Login </button>
            )
        }
        function LogoutButton(props){
            return (
                <button onClick={props.onClick}> Logout </button>
            )
        }

        function WarningBanner(props) {
            if (!props.warn) {
                return null;
            }

            return (
                <div className="warning">
                    Warning!
                </div>
            );
        }

       class LoginControl extends React.Component{
           constructor(props) {
               super(props);
               this.state = {isLoggedIn: false, showWarning: true}
               this.handleLoginClick = this.handleLoginClick.bind(this)
               this.handleLogoutClick = this.handleLogoutClick.bind(this)
               this.handleToggleClick = this.handleToggleClick.bind(this)
           }

           handleLoginClick(){
               this.setState({isLoggedIn: true})
           }

           handleLogoutClick(){
               this.setState({isLoggedIn: false})
           }

           handleToggleClick(){
                console.log('handleToggleClick');
                this.setState(state => ({
                    showWarning: !state.showWarning
                }))
                // this.setState({showWarning: !this.state.showWarning})
           }

           render(){
               const isLoggedIn = this.state.isLoggedIn
               let button
               if(isLoggedIn){
                   button = <LogoutButton onClick={this.handleLogoutClick} />
               }else{
                   button = <LoginButton onClick={this.handleLoginClick} />
               }

               return (
                   <div>
                        <Greeting isLoggedIn={isLoggedIn}/>
                        {button}
                        <hr/>
                        <WarningBanner warn={this.state.showWarning} />
                        <button onClick={this.handleToggleClick}>
                            {this.state.showWarning ? 'Hide' : 'Show'}
                        </button>
                    </div>
               )
           }
       }

       ReactDOM.render(
           <LoginControl />,
           document.getElementById('root')
       )

    </script>


</body>

</html>